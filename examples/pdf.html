<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>epub.js PDF Example</title>
		<style>
			html,
			body {
				margin: 0;
				padding: 0;
				height: 100%;
			}

			#toolbar {
				display: flex;
				gap: 12px;
				align-items: center;
				padding: 10px 12px;
				border-bottom: 1px solid #e5e5e5;
				font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
			}

			#viewer {
				height: calc(100% - 48px);
				overflow: auto;
				background: #f7f7f7;
			}
		</style>
	</head>
	<body>
		<div id="toolbar">
			<label>
				Open PDF:
				<input id="file" type="file" accept="application/pdf" />
			</label>
		</div>
		<div id="viewer"></div>

		<script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
		<script src="../dist/epub.min.js"></script>
		<script>
			(function () {
				var fileInput = document.getElementById("file");
				var viewer = document.getElementById("viewer");
				var rendition = null;
				var book = null;

				fileInput.addEventListener("change", function (event) {
					var file = event && event.target && event.target.files && event.target.files[0];
					if (!file) return;

					if (rendition) {
						try {
							rendition.destroy();
						} catch (e) {
							// NOOP
						}
						rendition = null;
					}
					if (book) {
						try {
							book.destroy();
						} catch (e) {
							// NOOP
						}
						book = null;
					}

					book = ePub.pdf(file, {
						workerSrc:
							"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js",
					});

					rendition = book.renderTo(viewer, {
						width: "100%",
						height: "100%",
						flow: "scrolled-continuous",
						spread: false,
						fixedLayout: { zoom: "fit-width" },
					});

					rendition.display();
				});
			})();
		</script>
	</body>
</html>

